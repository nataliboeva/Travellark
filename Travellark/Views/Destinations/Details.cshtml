@using Travellark.Models.Enums

@model Travellark.Models.Destination

@{
    ViewData["Title"] = "Details";
}

<div class="card mx-auto" style="width: 28rem;">
    @if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
    {
        <img src="@Model.ImageUrl"
             class="card-img-top"
             alt="@Model.Name" />
    }
    else
    {
        <img src="https://placehold.co/600x400?text=@Model.Name"
             class="card-img-top"
             alt="@Model.Name" />
    }


    <div class="card-body">
        <h5 class="card-title">@Model.Name</h5>
        <h6 class="card-subtitle mb-2 text-muted">@Model.Country - @Model.Region</h6>

        @if (!string.IsNullOrWhiteSpace(Model.InspirationText))
        {
            <p class="card-text">@Model.InspirationText</p>
        }
    </div>

    <ul class="list-group list-group-flush">
        <li class="list-group-item"><strong>Type:</strong> @Model.Type</li>
        @{
            var statusClass = Model.Status == DestinationStatus.Visited ? "bg-success" : "bg-secondary";
        }
        <li class="list-group-item">
            <strong>Status:</strong>
            <span class="badge @statusClass ms-1">
                @Model.Status
            </span>
        </li>

        @if (Model.Rating.HasValue)
        {
            <li class="list-group-item">
                <strong>Rating:</strong>
                <span class="text-warning ms-2">
                    @{
                        double rating = Model.Rating.Value;
                        for (int i = 1; i <= 5; i++)
                        {
                            if (rating >= i)
                            {
                                <i class="fa-solid fa-star"></i>
                            }
                            else if (rating >= i - 0.5)
                            {
                                <i class="fa-solid fa-star-half-stroke"></i>
                            }
                            else
                            {
                                <i class="fa-regular fa-star"></i>
                            }
                        }
                    }
                </span>
            </li>
        }



        <li class="list-group-item"><strong>Added On:</strong> @Model.CreatedAt.ToString("dd.MM.yyyy")</li>
        @if (Model.VisitedAt.HasValue)
        {
            <li class="list-group-item"><strong>Visited On:</strong> @Model.VisitedAt.Value.ToString("dd.MM.yyyy")</li>
        }
    </ul>

    <div class="card-body">

        @if (!string.IsNullOrWhiteSpace(Model.MapUrl))
        {
            <iframe src="@Model.MapUrl"
                    width="100%" height="260"
                    style="border:0;" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
        }

        <div class="mt-3 d-flex gap-2">
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary w-50">Edit</a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger w-50">Delete</a>
        </div>

        <div class="mt-2">
            <a asp-action="Index" class="btn btn-outline-secondary w-100">Back to List</a>
        </div>

    </div>
</div>
